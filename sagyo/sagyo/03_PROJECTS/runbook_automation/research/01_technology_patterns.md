# 調査: 画像→項目抽出の技術パターン

## 調査日: 2026-02-20

---

## 1. 処理パイプライン概要

```
画像入力 → 前処理 → OCR/構造抽出 → LLM正規化 → 出力/入力
```

各ステップに複数の技術選択肢がある。以下に整理する。

---

## 2. OCR（文字認識）

| 技術 | 提供元 | 特徴 | 精度目安 | コスト |
|------|--------|------|---------|--------|
| Amazon Textract | AWS | 表・フォーム構造を自動認識。Key-Value抽出に強い | 高（95%+） | $1.50/1000ページ〜 |
| Google Document AI | GCP | 帳票特化のプロセッサあり。日本語対応良好 | 高（95%+） | $1.50/1000ページ〜 |
| Azure AI Document Intelligence | Azure | 事前構築モデル（請求書・領収書等）が豊富 | 高（95%+） | $1.50/1000ページ〜 |
| Tesseract OCR | OSS | 無料。日本語は追加学習が必要。構造認識は弱い | 中（80-90%） | 無料 |
| EasyOCR | OSS | Pythonライブラリ。日本語対応。GPUで高速化可能 | 中（85-92%） | 無料 |

### 所見
- 帳票・フォーム系はクラウドOCR（Textract / Document AI）が圧倒的に楽
- OSSは「とりあえず試す」には良いがプロダクション運用のチューニングコストが高い

---

## 3. 構造抽出（レイアウト解析）

| 手法 | 説明 | 適用場面 |
|------|------|---------|
| テンプレートマッチング | 帳票のレイアウトが固定の場合、座標指定で抽出 | 定型帳票（自社フォーム等） |
| Key-Value抽出 | OCRサービスのフォーム認識機能で項目名と値をペアで取得 | 半定型帳票（請求書等） |
| テーブル抽出 | 表構造を認識し、行列データとして取得 | 一覧表・明細 |
| LLMによる自由抽出 | OCR結果のテキストをLLMに渡し、指定項目をJSON抽出 | 非定型（レイアウトがバラバラ） |

### 所見
- 定型 → テンプレートマッチングが最速・最安定
- 半定型 → クラウドOCRのKey-Value抽出で十分
- 非定型 → LLM正規化が必須。コスト増だが柔軟性は最高

---

## 4. LLM正規化

| パターン | 説明 | メリット | デメリット |
|---------|------|---------|-----------|
| OCR結果 → Claude/GPT → JSON | OCRテキストをLLMに渡し、指定スキーマでJSON出力 | 非定型に強い。プロンプトで出力形式を制御可能 | API呼び出しコスト。レイテンシ |
| OCR結果 → ルールベース変換 | 正規表現や辞書マッチで正規化 | 高速・低コスト・予測可能 | 非定型に弱い。メンテコスト |
| マルチモーダルLLM直接入力 | 画像を直接Claude/GPT-4Vに渡して抽出 | OCR不要。パイプラインが最短 | コスト高。大量処理に不向き。精度の安定性に課題 |

### 所見
- MVP段階: マルチモーダルLLM直接入力が最速（パイプライン最短）
- 本番化: OCR + LLM正規化の2段構成が精度・コスト・監査性のバランス良
- ルールベースは帳票パターンが少数固定の場合のみ有効

---

## 5. 入力方式の整理

| 方式 | 説明 | 難易度 | 適用場面 |
|------|------|--------|---------|
| CSV/Excel出力 | 抽出結果をファイルに書き出し、人が確認して取り込む | 低 | MVP・監査重視の現場 |
| Google Sheets出力 | スプレッドシートに自動書き込み。共有・編集が容易 | 低〜中 | チーム運用・レビューフロー |
| API登録 | 業務システムのAPIに直接POST | 中〜高 | 本番自動化・大量処理 |
| 画面自動入力（RPA） | ブラウザ/デスクトップ操作を自動化して入力 | 高 | APIがないレガシーシステム |

### 所見
- MVP: CSV or Sheets出力（人が確認 → 取り込み）
- 本番: API登録が理想。APIがなければSheets連携を維持
- RPA（画面自動入力）はメンテコストが高く壊れやすい。最終手段

---

## 6. 横断比較: 精度・運用・監査・セキュリティ・ログ

| 観点 | クラウドOCR+LLM | マルチモーダルLLM直接 | OSS OCR+ルールベース |
|------|----------------|---------------------|-------------------|
| **精度** | 高（95%+） | 中〜高（90-95%）[仮] | 中（80-90%） |
| **運用負荷** | 低（マネージド） | 低（API呼び出しのみ） | 高（チューニング必要） |
| **監査性** | 高（OCR結果+LLM入出力を保存可） | 中（入力画像+出力のみ） | 高（全処理をログ可） |
| **セキュリティ** | データが外部API経由 | データが外部API経由 | オンプレ完結可能 |
| **ログ** | API呼び出しログ+S3保存 | API呼び出しログ | 自前でログ設計が必要 |
| **コスト/件** | 中（$0.01-0.05/件） | 高（$0.03-0.15/件）[仮] | 低（インフラ費のみ） |
