# 推奨案

## 作成日: 2026-02-20

---

## MVP（最速で価値が出る形）

### 構成
```
スマホ/PC で画像撮影
  → Google Drive / S3 にアップロード
    → Claude API (マルチモーダル) で項目抽出
      → Google Sheets に出力
        → 人が確認・修正 → 業務システムに取り込み
```

### なぜこの構成か
- 実装が最も軽い（API呼び出し+Sheets書き込みのみ）
- 「画像を入れたら表が出てくる」体験を最短で社内に見せられる
- 人の確認ステップを挟むため、精度不足でも業務が止まらない

### MVP仕様
| 項目 | 内容 |
|------|------|
| 対象帳票 | [仮] 1種類（最も処理頻度の高いもの） |
| 処理件数 | [仮] 1日10-30件 |
| 抽出項目 | [仮] 5-10項目 |
| 出力先 | Google Sheets（1シート/日） |
| 確認フロー | 人が目視確認 → 修正 → 確定 |
| 精度目標 | 項目単位で90%以上正答（PoC成功条件参照） |

### 所要期間
| フェーズ | 期間 | 内容 |
|---------|------|------|
| 環境構築 | 1日 | APIキー取得、Sheets連携設定 |
| プロンプト設計 | 2-3日 | サンプル画像でプロンプト調整、出力スキーマ定義 |
| 結合テスト | 1-2日 | E2E動作確認、エラーハンドリング |
| 社内トライアル | 1週間 | 実帳票で運用、精度測定 |
| **合計** | **約2週間** | |

---

## 本番化ロードマップ

```
Phase 1: PoC（2週間）
  方式A: マルチモーダルLLM直接 → Sheets出力
  ↓ 精度・運用性を評価
Phase 2: パイロット（1-2ヶ月）
  対象帳票を3-5種に拡大
  方式Bへ移行検討（OCR+LLM 2段構成）
  エラー率・修正時間を計測
  ↓ ROI確認
Phase 3: 本番化（2-3ヶ月）
  方式B: クラウドOCR + LLM正規化
  API連携 or Sheets連携の本番フロー構築
  監査ログ・権限管理の整備
  ↓ 安定運用
Phase 4: 最適化（継続）
  帳票パターン固定化 → 方式Cへ部分移行
  処理量に応じたコスト最適化
  新帳票の追加フロー標準化
```

| Phase | 期間 | 方式 | 出力先 | 確認フロー |
|-------|------|------|--------|-----------|
| 1 PoC | 2週間 | A（LLM直接） | Sheets | 全件目視 |
| 2 パイロット | 1-2ヶ月 | A→B移行 | Sheets | 低信頼度のみ目視 |
| 3 本番化 | 2-3ヶ月 | B（OCR+LLM） | API or Sheets | 例外のみ目視 |
| 4 最適化 | 継続 | B+C混合 | API | 抜き取り検査 |

---

## リスクと対策

| # | リスク | 影響度 | 発生確率 | 対策 |
|---|--------|--------|---------|------|
| 1 | OCR/LLM精度が目標未達 | 高 | 中 | PoC段階で帳票種別ごとに精度測定。未達なら対象帳票を絞る |
| 2 | 画像品質のバラつき（斜め撮り・影・低解像度） | 中 | 高 | 撮影ガイドライン策定。前処理（傾き補正・コントラスト調整）追加 |
| 3 | LLM APIの料金増 | 中 | 中 | Phase3以降で方式C（ルールベース）へ段階移行。月次コスト監視 |
| 4 | セキュリティ懸念（機密帳票の外部送信） | 高 | 低 | 対象帳票の機密レベルを確認。必要ならVPC内完結構成（Textract+Bedrock） |
| 5 | 帳票フォーマット変更への追従 | 中 | 中 | LLM方式なら影響小。ルールベース部分は変更検知の仕組みを入れる |
| 6 | 担当者の運用定着しない | 中 | 中 | MVP段階で実担当者を巻き込む。「手作業より楽」を体感させる |

---

## PoC成功条件（定量）

| # | 条件 | 基準値 | 測定方法 |
|---|------|--------|---------|
| 1 | 項目抽出精度 | 90%以上（項目単位の正答率） | サンプル50件[仮]の正誤判定 |
| 2 | 処理時間 | 1件あたり30秒以内（API応答） | 処理ログから計測 |
| 3 | 人の確認・修正時間 | 手作業比50%以上削減 | 手作業の計測値との比較 |
| 4 | エラー率 | 処理失敗（パースエラー等）5%以下 | エラーログから計測 |
| 5 | 対象帳票カバー率 | 指定1種類の全項目を抽出可能 | 抽出スキーマとの突合 |

**PoC判定**: 条件1-4をすべて満たせば「成功」→ Phase2へ進む
