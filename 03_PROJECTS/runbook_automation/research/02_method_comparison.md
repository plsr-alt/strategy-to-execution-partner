# 方式比較表

## 調査日: 2026-02-20

---

## 比較対象の4方式

| # | 方式名 | 構成 |
|---|--------|------|
| A | マルチモーダルLLM直接 | 画像 → Claude/GPT-4V → JSON → CSV/Sheets |
| B | クラウドOCR + LLM正規化 | 画像 → Textract/DocumentAI → LLM → JSON → CSV/Sheets/API |
| C | クラウドOCR + ルールベース | 画像 → Textract/DocumentAI → 正規表現/辞書 → CSV/Sheets/API |
| D | OSS OCR + ルールベース | 画像 → Tesseract/EasyOCR → 正規表現/辞書 → CSV |

---

## 5軸比較

| 評価軸 | A: LLM直接 | B: OCR+LLM | C: OCR+ルール | D: OSS+ルール |
|--------|-----------|-----------|-------------|-------------|
| **難易度**（実装コスト） | ★☆☆ 最も簡単 | ★★☆ 中程度 | ★★☆ 中程度 | ★★★ 高い |
| **ランニングコスト** | ★★★ 高い | ★★☆ 中程度 | ★☆☆ 安い | ★☆☆ 最安 |
| **壊れにくさ**（安定性） | ★★☆ LLM出力の揺れ | ★★★ 最も安定 | ★★☆ 帳票変更に弱い | ★☆☆ チューニング依存 |
| **拡張性**（新帳票対応） | ★★★ プロンプト変更のみ | ★★★ プロンプト変更のみ | ★☆☆ ルール追加が必要 | ★☆☆ ルール追加が必要 |
| **スピード**（処理速度） | ★☆☆ 遅い（数秒/件） | ★★☆ 中程度 | ★★★ 高速 | ★★☆ 中程度 |

---

## 観点別の詳細

### 難易度
- **A**が最も楽。画像をAPIに投げてJSONを受け取るだけ。PoCは半日で可能
- **B**はOCRとLLMの2段呼び出し。エラーハンドリングが増えるが、制御しやすい
- **C**は正規表現の設計・テストが必要。帳票パターン数に比例して工数増
- **D**はOCRエンジン自体のチューニング（日本語モデル・前処理）が必要

### ランニングコスト（1000件/月の場合の概算）
| 方式 | 月額目安 |
|------|---------|
| A | $30-150（LLM API） |
| B | $15-50（OCR）+ $10-30（LLM） |
| C | $15-50（OCR）のみ |
| D | インフラ費のみ（$5-20） |

### 壊れにくさ
- **B**が最も安定。OCRで確実にテキスト化した上でLLMが構造化するため、各段の責務が明確
- **A**はLLMの出力フォーマットが稀に崩れるリスク（JSONパースエラー等）
- **C**は帳票レイアウトが変わるとルール修正が必要
- **D**はOCR精度自体にブレがあり、ルールが前提とする入力品質を下回る場合がある

### 拡張性
- **A, B**は新しい帳票に対してプロンプトを追加/変更するだけで対応可能
- **C, D**は帳票ごとにルールセットの追加が必要

### スピード
- **C**が最速。OCR後の処理がルールベースで即座に完了
- **A**は画像解析を含むLLM呼び出しで数秒/件
- **B**はOCR+LLMの直列で2-5秒/件
- **D**はOCR処理自体がクラウドより遅い傾向

---

## 推奨の方向性

| フェーズ | 推奨方式 | 理由 |
|---------|---------|------|
| **PoC / MVP** | **A: マルチモーダルLLM直接** | 最速で「動くもの」を見せられる。精度の実感値も得やすい |
| **本番化** | **B: クラウドOCR + LLM正規化** | 精度・安定性・監査性・コストのバランスが最良 |
| **大量処理/コスト最適化** | **C: クラウドOCR + ルールベース** | 帳票パターンが固定化した後に移行 |
