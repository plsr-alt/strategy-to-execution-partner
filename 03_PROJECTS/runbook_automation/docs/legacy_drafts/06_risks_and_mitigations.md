# リスクと対策

**作成日**: 2026-02-20
**リスクレベル定義**: H=High（即時対策要）/ M=Medium / L=Low

---

## 1. 技術リスク

| # | リスク | 発生確率 | 影響度 | レベル | 対策 |
|---|--------|---------|--------|--------|------|
| T-1 | OCR精度が目標（F1≥85%）に達しない | M | H | **H** | PoC期間に複数OCR比較・前処理改善・フォームタイプ絞り込み |
| T-2 | LLM出力が非決定的（同一入力で異なる出力） | H | M | **M** | temperature=0固定・seed設定・Few-shot固定化 |
| T-3 | 手順書フォーマットが多様で汎化困難 | H | H | **H** | MVPは1フォーマット限定。マルチフォーマット対応はPhase3以降 |
| T-4 | API・外部サービスの仕様変更 | L | H | **M** | インターフェース層でラップ。バージョン固定。モニタリング |
| T-5 | 処理速度（バッチ遅延）が業務許容を超える | M | M | **M** | Step Functions並列化・Lambda設定最適化・SLO定義 |
| T-6 | RPA/Playwrightが画面変更で破綻 | H | H | **H** | RPAはAPI非対応システム限定。変更検知アラートを実装 |
| T-7 | AWS Textractの日本語精度が不十分 | M | H | **H** | PoC初週で測定。不足時はPaddleOCRへフォールバック |

---

## 2. 運用リスク

| # | リスク | 発生確率 | 影響度 | レベル | 対策 |
|---|--------|---------|--------|--------|------|
| O-1 | オペレーターが確認UIを形骸化（全件OK押し） | H | H | **H** | UI設計で低confidence項目はスキップ不能に。抜き取りQC実施 |
| O-2 | 例外件数が多くて人手負荷が現状より増加 | M | H | **H** | 例外率目標≤15%をGo条件に。超過時は自動化を一時停止 |
| O-3 | 担当者異動で運用ブラックボックス化 | M | M | **M** | ADR・手順書を自動化で蓄積。ランブック整備 |
| O-4 | 評価セットと本番データの乖離 | M | H | **H** | 月次でテストセット更新。本番データから定期サンプリング |
| O-5 | コスト想定超過（Textract/Bedrock） | L | M | **M** | 月次コストアラート設定。大量処理時はバッファ確認 |

---

## 3. セキュリティ・ガバナンスリスク

| # | リスク | 発生確率 | 影響度 | レベル | 対策 |
|---|--------|---------|--------|--------|------|
| S-1 | PII（氏名・口座・住所）がクラウドOCRに送信される | H | H | **H** | ① 送信前にPIIマスキング処理を必須化 ② Bedrock VPC Endpoint利用 ③ 送信データ最小化 |
| S-2 | 抽出データが不正アクセス・漏洩 | L | H | **M** | S3 SSE-KMS / IAM最小権限 / CloudTrail有効 / DynamoDBアクセス制限 |
| S-3 | 監査ログの改ざん・欠損 | L | H | **M** | S3 Object Lock（WORM設定）/ CloudTrail改ざん防止 |
| S-4 | 誤入力による業務データ汚染 | M | H | **H** | ドライランモード（実DB変更なし）→ 承認後のみ本反映。ロールバック手順整備 |
| S-5 | 不正なファイルアップロード（マルウェア） | L | H | **M** | S3 Virus Scan（GuardDuty/マルウェアスキャン）/ ファイルタイプ制限 |

---

## 4. プロジェクト・ガバナンスリスク

| # | リスク | 発生確率 | 影響度 | レベル | 対策 |
|---|--------|---------|--------|--------|------|
| P-1 | スコープクリープ（「これもやって」要求） | H | M | **M** | MVPスコープをドキュメント化・合意取得。変更は正式リクエストフロー |
| P-2 | 現場の抵抗（「自動化で仕事が奪われる」） | M | M | **M** | 「補助ツール」として位置付け。入力時間削減→別業務へ。説明会実施 |
| P-3 | PoC後に予算・リソースが確保できない | M | H | **H** | PoC中から経営層への進捗共有。ROI試算を資料化 |
| P-4 | LLMプロバイダーの料金改定・サービス終了 | L | M | **L** | Bedrockで複数モデル切替可能な設計。プロバイダー固定しない |

---

## 5. リスクマトリクス（視覚的整理）

```
影響度
 H  | T-3  T-6  S-1  S-4 | T-1  T-7  O-1  O-2  P-3 | T-4  O-4  S-2  S-3
 M  |       P-1           | T-5  O-3  S-5  P-2       | T-2  O-5
 L  |                     |                            | P-4
    |      高（H）         |        中（M）             |       低（L）
                               発生確率
```

---

## 6. 緊急対応フロー（インシデント発生時）

```
[異常検知]
    │
    ├── 精度劣化アラート（CloudWatch）
    │       → 自動: 処理を一時停止 + SNS通知
    │       → 手動: 原因調査（直近の変更確認）→ ロールバックor修正
    │
    ├── PII漏洩疑い
    │       → 自動: 処理停止 + セキュリティチーム自動通知
    │       → 手動: CloudTrail調査 → 報告書作成 → 再発防止策
    │
    ├── 誤データ反映
    │       → 手動: 対象レコード特定 → ロールバック手順実行 → 影響範囲確認
    │       → 事後: インシデントレポート → ADR記録
    │
    └── サービス障害（Textract/Bedrock）
            → 自動: フォールバック（別OCR or キューで待機）
            → 手動: 業務継続判断（手動入力に切り戻し）
```

---

## 7. PIIデータ取扱いガイドライン（本プロジェクト固有）

```
分類:
  要注意: 氏名、住所、電話番号、メールアドレス
  厳重注意: 口座番号、マイナンバー、保険証番号

処理原則:
  1. 送信前にマスキング（氏名→★★★）
  2. マスキング後データのみクラウドOCRに送信
  3. 元データはオンプレ or VPC内のみ保持
  4. datasets/ はGitに含めない（.gitignore）
  5. 保管期間: PoC終了後30日で完全削除

例外（ローカルOCR使用時）:
  - PaddleOCR / Tesseract をVPC内Lambdaで実行する場合は外部送信なし
  - この場合はマスキング不要だが、ログには要注意項目を出力しない
```
